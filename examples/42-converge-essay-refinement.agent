# 42 - Essay Refinement with Convergence
# Iteratively improves an essay until it reaches publication quality
# Demonstrates CONVERGE with a critic agent

NAME converge-essay-refinement

INPUT topic
INPUT tone DEFAULT "professional"
INPUT target_audience DEFAULT "general readers"

AGENT writer """Writer. Clear, concise content. 300-500 words per draft."""

AGENT critic """Editor. Top 2 issues per review. Say DONE if essay is good."""

GOAL draft "Write 300-500 word draft about $topic. $tone tone for $target_audience." -> initial_draft USING writer

CONVERGE refine """Critic: top 2 issues or DONE.
Writer: fix issues briefly.
CONVERGED when DONE.""" -> final_essay USING writer, critic WITHIN 3

RUN step1 USING draft
RUN step2 USING refine
