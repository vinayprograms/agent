# 21 - Security Audit (with Profile)
# Comprehensive security review using reasoning-heavy model

NAME security-audit
INPUT target_path
INPUT scope DEFAULT "web application"

AGENT auditor FROM agents/security-auditor.md REQUIRES "reasoning-heavy"

GOAL recon "Glob for key files at $target_path. Read max 5 critical files (auth, handlers, config)."
GOAL analyze "Focus on $scope. Find top 5 vulnerabilities. Prioritize critical issues." USING auditor
GOAL classify "Classify by severity. Skip Low unless nothing else found."
GOAL report "Brief report: 1-paragraph summary, top 5 findings with fixes. Save to security-audit-output.md."

RUN audit USING recon, analyze, classify, report
