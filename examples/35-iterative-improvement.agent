# 35 - Iterative Improvement
# Example showing iterative improvement with multiple agents
# Each iteration: create -> critique -> improve until quality threshold met

NAME iterative-improvement

INPUT initial_content
INPUT quality_threshold DEFAULT "high"
INPUT output_file DEFAULT "improved-content.md"

AGENT creator """Content creator. Create clear, concise content. No fluff."""

AGENT critic """Critic. Identify top 2-3 weaknesses only. Say GOOD if quality met."""

AGENT improver """Editor. Make targeted fixes. Don't rewrite unless necessary."""

GOAL create "Create initial content (200-400 words) based on: $initial_content" -> draft USING creator

CONVERGE refine """Critic: top 2-3 issues or GOOD.
Improver: fix issues.
CONVERGED when GOOD or no major issues.""" -> refined_content USING critic, improver WITHIN 3

GOAL finalize "Light polish only. Save to $output_file." USING improver

RUN init USING create
RUN improve USING refine
RUN finish USING finalize
